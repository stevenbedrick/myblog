--- 
layout: post
title: RVM, Ruby 1.9.2, and Rails 2.3.8
tags: []

status: publish
type: post
published: true
meta: {}

---
<p>File this one under the &ldquo;that shouldn&rsquo;t have worked, but it did&rdquo; category. I decided that it was high time to start using Ruby 1.9, but didn&rsquo;t want to mess around trying to get it to live happily side-by-side with my stock Snow Leopard installation of Ruby 1.8.whatever. I know it&rsquo;s supposed to be relatively painless, but I just didn&rsquo;t want to go there. So, I decided to try out <a href="http://rvm.beginrescueend.com/">RVM</a>. Installing it was a breeze, and getting the newest version of Ruby installed was even easier. RVM is a seriously well-documented piece of software, I gotta say.</p><p>So, after installing, my natural next step was to try and see if one of my current Rails 2.3.8 projects played nicely with 1.9. Installing the required gems into RVM&rsquo;s sandbox was pretty painless (except for ruby-debug, but whatever), but when I went to run <code>script/console</code>, I got the following unhelpful error message:</p><div class="CodeRay">  <div class="code"><pre>/Users/steven/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-2.3.8/lib/action_controller/cgi_ext/stdinput.rb:14:in `included': undefined method `alias_method_chain' for CGI:Class (NoMethodError) ...</pre></div></div><p>Googling was surprisingly unhelpful- there&rsquo;s a 7-month-old <a href="https://rails.lighthouseapp.com/projects/16213/tickets/112-undefined-method-alias_method_chain-for-cgiclass-when-generating-guides">Lighthouse ticket</a> for the Rails Guides project that reported exactly the same error with Rails 2.3.5, but there aren&rsquo;t any comments on the ticket. Other than that, I wasn&rsquo;t finding much. In desperation, I started looking for various other <code>alias_method_chain</code> errors, and eventually stumbled on <a href="http://shapingclouds.com/2009/06/11/solution-for-undefined-method-alias_method_chain-after-upgrading-to-rails-2-3-2/">this guy</a>, who reported a similar-looking error that occurred in a completely different file and with a completely different version of Rails. Something about it tickled a neuron- his problem eventually turned out to be related to his version of Ruby not getting linked against <code>libiconv</code> when it was compiled by RVM. I checked, and discovered that my RVM 1.9.2 installation didn&rsquo;t seem to know about <code>iconv</code>, either (i.e., running <code>require 'iconv'</code> threw an error). This was probably due to the fact that my version of <code>libiconv</code> was installed using MacPorts, and RVM can&rsquo;t seem to find MacPorts libraries unless I explicitly tell it to.</p><p>Even though my problem seemingly had nothing to do with <code>iconv</code>, I was desperate enough to give recompiling a shot, and I figured that not being able to find <code>iconv</code> would certainly end up causing some sort of weird problem down the road. I followed the instructions found <a href="http://exceptionz.wordpress.com/2010/02/03/how-to-fix-the-iconv-require-error-in-ruby-1-9/">here</a>, and, lo and behold, my Rails 2.3.8 started working beautifully.</p><p>I don&rsquo;t know why this worked. The error I was getting seemed to have nothing to do with <code>iconv</code>, or, actually, any kind of character encoding stuff at all- there was nothing in the stack trace to suggest that anybody was trying to require <code>iconv</code>, or anything like that. Recompiling Ruby again shouldn&rsquo;t have fixed it, but it did. This is always a disconcerting phenomenon, but you know what? It&rsquo;s working now, and I really don&rsquo;t care to go digging any further. Software, laws, and sausages- three things into which I don&rsquo;t care to dig too deeply.</p><p>I&rsquo;m putting this up online in the hopes that Google will find it and save somebody else some headache down the road. Pay it forward, right? If anybody reading this post has any ideas as to what was going on, leave a comment or <a href="mailto:steve@bedrick.org">drop me an email</a>.</p>
